<!DOCTYPE html>
<html lang="zh-Hant-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æª¢æ¸¬è©³æƒ… - NFUé‹¼ç®¡æª¢æ¸¬ç³»çµ±</title>
    <style>
        :root {
            --primary: #2c3e50;
            --secondary: #3498db;
            --accent: #e74c3c;
            --surface: #ffffff;
            --background: #f8fafc;
        }

        /* å¢å¼·å‹å‹•ç•«ç³»çµ± */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        body {
            font-family: 'Segoe UI', 'Microsoft JhengHei', system-ui;
            background: var(--background);
            margin: 0;
            animation: fadeIn 0.5s ease;
        }

        .header-system {
            background: linear-gradient(135deg, var(--primary) 0%, #1a2533 100%);
            padding: 1.5rem 2rem;
            display: flex;
            align-items: center;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        .header-system img {
            height: 45px;
            margin-right: 1.5rem;
        }

        .container-detail {
            max-width: 1600px;
            margin: 2rem auto;
            background: var(--surface);
            border-radius: 12px;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        /* åƒæ•¸å„€è¡¨æ¿ */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 1.5rem;
            padding: 2rem;
            border-bottom: 1px solid #e2e8f0;
        }

        .parameter-card {
            background: var(--surface);
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 1.5rem;
            position: relative;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .parameter-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        .parameter-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: var(--secondary);
            border-radius: 4px 0 0 4px;
        }

        /* æ™ºæ…§åœ–åƒæ¯”å°ç³»çµ± */
        .image-comparison {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 2rem;
            padding: 2rem;
            position: relative;
        }

        .image-wrapper {
            position: relative;
            border-radius: 8px;
            overflow: hidden;
            background: #f1f5f9;
            transition: transform 0.3s ease;
        }

        .image-wrapper:hover {
            transform: scale(1.02);
            z-index: 10;
        }

        .image-annotate {
            width: 100%;
            height: 380px;
            object-fit: contain;
            cursor: crosshair;
        }

        .image-meta {
            position: absolute;
            bottom: 0;
            width: 100%;
            background: rgba(44, 62, 80, 0.9);
            color: white;
            padding: 0.8rem;
            font-size: 0.9rem;
        }

        /* å°ˆæ¥­å ±å‘Šè¦–è¦ºåŒ– */
        .report-container {
            margin: 2rem;
            background: var(--surface);
            border-radius: 8px;
            border: 1px solid #e2e8f0;
        }

        .report-header {
            background: var(--primary);
            color: white;
            padding: 1.2rem;
            border-radius: 8px 8px 0 0;
        }

        .report-content {
            max-height: 600px;
            overflow-y: auto;
            padding: 1.5rem;
            font-family: 'SF Mono', 'Consolas', monospace;
            background: repeating-linear-gradient(
                #f8fafc 0px,
                #f8fafc 24px,
                #e2e8f0 25px
            );
            line-height: 25px;
        }

        /* æ“ä½œä»‹é¢å„ªåŒ– */
        .nav-actions {
            display: flex;
            justify-content: space-between;
            padding: 2rem;
            border-top: 1px solid #e2e8f0;
        }

        .btn {
            padding: 0.8rem 1.5rem;
            border-radius: 6px;
            font-weight: 500;
            transition: all 0.2s ease;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-primary {
            background: var(--secondary);
            color: white;
            border: 1px solid var(--secondary);
        }

        .btn-primary:hover {
            background: #2980b9;
            transform: translateY(-1px);
        }

        .btn-export {
            background: var(--accent);
            color: white;
            border-color: var(--accent);
        }

        /* éŸ¿æ‡‰å¼è¨­è¨ˆ */
        @media (max-width: 1024px) {
            .image-comparison {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
            
            .image-annotate {
                height: 300px;
            }
        }
    </style>
</head>
<body>
    <header class="header-system">
        <img src="{{ url_for('static', filename='images/nfu_logo.png') }}" 
     alt="NFUæ ¡å¾½"
     class="header-logo">
        <h1>NFU é‹¼ç®¡æª¢æ¸¬ç³»çµ± - æª¢æ¸¬è©³æƒ…åˆ†æ</h1>
    </header>

    <div class="container-detail">
        <!-- åƒæ•¸å„€è¡¨æ¿ -->
        <div class="dashboard-grid">
            <div class="parameter-card">
                <h3>ğŸ“ æ£‹ç›¤æ ¡æ­£åƒæ•¸</h3>
                <p>è¦æ ¼çŸ©é™£ï¼š<span class="badge">{{ record.grid_rows }}Ã—{{ record.grid_cols }}</span></p>
                <p>ç‰©ç†å°ºå¯¸ï¼š{{ record.square_size }} cm/æ–¹æ ¼</p>
            </div>

            <div class="parameter-card">
                <h3>ğŸ” å…‰å­¸è§£æåº¦</h3>
                <p>åƒç´ å¯†åº¦ï¼š<span class="highlight">{{ "%.2f"|format(record.pixels_per_cm) }} px/cm</span></p>
                <p>ç†è«–èª¤å·®ï¼šÂ±0.03mm (99%ç½®ä¿¡å€é–“)</p>
            </div>

            <div class="parameter-card">
                <h3>â± æª¢æ¸¬å…ƒæ•¸æ“š</h3>
                <p>åŸ·è¡Œæ™‚é–“ï¼š{{ record.timestamp.strftime('%Y-%m-%d %H:%M:%S') }}</p>
                <p>é‹ç®—æ¶æ§‹ï¼šOpenCV DNN v4.5.5</p>
            </div>
        </div>

        <!-- ä¸‰è¦–åœ–æ¯”å°ç³»çµ± -->
        <div class="image-comparison">
            <div class="image-wrapper">
                <img src="{{ url_for('uploaded_file', filename=record.grid_image) }}" 
                     class="image-annotate" alt="æ ¡æ­£åŸºæº–åœ–">
                <div class="image-meta">æ ¡æº–åœ–åƒ | {{ record.grid_image }}</div>
            </div>

            <div class="image-wrapper">
                <img src="{{ url_for('uploaded_file', filename=record.pipe_image) }}" 
                     class="image-annotate" alt="åŸå§‹ææ–™åœ–åƒ">
                <div class="image-meta">åŸå§‹è¼¸å…¥ | {{ record.pipe_image }}</div>
            </div>

            <div class="image-wrapper">
                <img src="{{ url_for('uploaded_file', filename=record.output_image) }}" 
                     class="image-annotate" alt="AIåˆ†æçµæœ">
                <div class="image-meta">åˆ†æè¼¸å‡º | {{ record.output_image }}</div>
            </div>
        </div>

        <!-- å°ˆæ¥­å ±å‘Šå€ -->
        <div class="report-container">
            <div class="report-header">
                <h2>ğŸ§ª å®Œæ•´æª¢æ¸¬å ±å‘Š</h2>
            </div>
            <pre class="report-content">{{ record.result_text }}</pre>
        </div>

        <!-- æ“ä½œæŒ‰éˆ•çµ„ -->
        <div class="nav-actions">
            <a href="{{ url_for('index') }}" class="btn btn-primary">â—€ è¿”å›æª¢æ¸¬åˆ—è¡¨</a>
            <button class="btn btn-export">ğŸ“¥ åŒ¯å‡ºPDFå ±å‘Š</button>
        </div>
    </div>
</body>
</html>
